#### 浏览器 repaint && reflow

---
1. ##### 重绘与回流

   - ###### 文档出自加载时，HTML解析器会解析元素构建DOM树🌲，CSS解析器解析样式为样式结构体，浏览器通过🌲和样式结构体构建渲染树🌲，然后遍历渲染树的每个渲染器，浏览器将其绘制到页面。

2. ##### 重绘 repaint

   - ###### 当元素的外观或外观可见性发生变化会触发重绘

3. ##### 回流 reflow

   - ###### render树中的部分或者全部，因为元素属性变化，需要重新计算render🌲

   - ###### 回流必定重绘，重绘不一定回流

   - ###### 页面至少需要一次回流（第一次渲染页面时）

4. ##### 导致回流的原因

   1. ###### 调整窗口大小，触发resize（）

   2. ###### 元素位置改变

   3. ###### 元素尺寸改变

   4. ###### 内容改变

   5. ###### 页面初始化

   6. ###### 添加或删除DOM元素

5. ##### 减少回流和重绘的方法（减少对render🌲的操作，减少对一些style的请求）

   1. ###### 避免DOM操作，对为render的DOM（display：none）进行操作，无影响

   2. ###### 批量处理元素，如处理完后统一show

   3. ###### 尽量在底端处理DOM，减少影响

   4. ###### 避免设置多层内联样式

   5. ###### 将多次回流元素脱离文档流，position：absolute、fixed

   6. ###### 牺牲平滑度换取速度

   7. ###### 避免使用table布局

   8. ###### 避免使用css的js表达式，因为每次都需重新计算文档

6. ##### 浏览器的优化

   - ###### 浏览器会将repaint，reflow操作push进一个队列，攒够一定数量统一处理